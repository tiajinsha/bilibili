import{a8 as f,b7 as i,b8 as l,b9 as u,ba as n}from"./index.b3137ebc.js";const[c,d]=f(void 0);function L(){this.done||(this.createEffect(()=>{if(!(this.mouseControlState.get()!==!0||i()!==this.camera))return l("camera"),()=>{l("mouse")}},[this.mouseControlState.get,i]),this.createEffect(()=>{if(i()!==this.camera||!this.mouseControlState.get())return;if(d()===this.camera){const e=s=>this.gyrate(s.movementX,s.movementY);return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}}let t=!1,[o,r]=[0,0];const a=u.on("down",e=>(t=!0,[o,r]=[e.clientX,e.clientY])),v=u.on("up",()=>t=!1),m=e=>{if(e.movementX===void 0){const[s,h]=[e.clientX-o,e.clientY-r];[o,r]=[e.clientX,e.clientY],t&&this.gyrate(s*2,h*2);return}t&&this.gyrate(e.movementX*2,e.movementY*2)};return n.addEventListener("pointermove",m),()=>{a.cancel(),v.cancel(),n.removeEventListener("pointermove",m),t=!1}},[this.mouseControlState.get,i,d]),this.createEffect(()=>{const t=i();if(this.mouseControlState.get()!==!0||t!==this.camera)return;const o=()=>{var a;return(a=n.requestPointerLock)===null||a===void 0?void 0:a.call(n)},r=()=>{document.pointerLockElement===n?c(t):c(void 0)};return n.addEventListener("click",o),document.addEventListener("pointerlockchange",r),()=>{n.removeEventListener("click",o),document.removeEventListener("pointerlockchange",r),document.exitPointerLock(),c(void 0)}},[this.mouseControlState.get,i]))}export{L as default};
